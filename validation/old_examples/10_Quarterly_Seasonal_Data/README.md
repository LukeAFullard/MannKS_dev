# Validation Case V-10: Quarterly Seasonal Data

## Objective
This test verifies the `seasonal_trend_test` function's ability to handle quarterly data correctly. It confirms that setting `period=4` and `season_type='quarter'` produces an accurate trend analysis that aligns with the LWP-TRENDS R script.

## Data
A synthetic dataset of 20 years of quarterly samples was generated. The data includes:
- A linear increasing trend (target annual slope: 0.80).
- A sinusoidal seasonal pattern with a 4-quarter period.
- Random noise.

The plot generated by the `MannKS` analysis is shown below.

![Quarterly Trend Plot](quarterly_trend_plot.png)

```python
import pandas as pd
import numpy as np
import MannKS as mk

# Generate Data
n_years = 20
n = n_years * 4
t = pd.to_datetime(pd.date_range(start='2000-01-01', periods=n, freq='QS-JAN'))
slope = 0.2000 # Per quarter
intercept = 15
trend = slope * np.arange(n) + intercept
seasonal = 3 * np.sin(2 * np.pi * np.arange(n) / 4)
noise = np.random.normal(0, 0.7, n)
x = trend + seasonal + noise

# Run MannKS seasonal test for quarterly data
mk_results = mk.seasonal_trend_test(
    x, t,
    period=4,
    season_type='quarter',
    slope_scaling='year'
)
print("Annual Sen's Slope:", mk_results.slope)
print("p-value:", mk_results.p)
```

## Results Comparison

| Metric              | MannKS (Standard) | MannKS (LWP Mode) | LWP-TRENDS R Script |
|---------------------|-----------------------|-----------------------|---------------------|
| p-value             | 0.000000   | 0.000000        | 0.000000     |
| Sen's Slope (annual)| 0.796421 | 0.796421    | 0.796421       |
| Lower CI (90%)      | 0.775990 | 0.775999 | 0.775999    |
| Upper CI (90%)      | 0.817188 | 0.816590 | 0.816590    |

## Analysis
All methods correctly identify a highly significant increasing trend. The results for the Sen's slope and confidence intervals are nearly identical across all three analysis types.

This validation confirms that the `seasonal_trend_test` function is flexible and correctly handles different seasonal periods when the `period` and `season_type` parameters are configured appropriately. The LWP-emulation mode continues to align very closely with the reference R script.